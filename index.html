<!DOCTYPE html>
<html lang="en-us">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      
    <title>Unity WebGL Player | FantomMonstre</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    
  </head>
  <body  style="background-color: rgb(15, 15, 15); color: goldenrod; ">
    
    <!--
    <div id="tutorial" style="width:50px">
      <p>    This is Alpha Version v1.0.12. If you encounter any bugs, you can revert to the Text UI at(<a href="https://onthewaytofantom.github.io/MonstreTest/"  target="_blank">https://onthewaytofantom.github.io/MonstreTest/</a>). When encounter bug, refresh webpage. 
        <br>
        <br>    New Player Guide:
        <br>    1. Mint an Egg 
        <br>    &nbsp;&nbsp;a. Click on "Legandary Frog" at your starting location.
        <br>    &nbsp;&nbsp;b. Select "Mint 1 Egg" or "Mint 5 egg".
        <br>    &nbsp;&nbsp;c. Approve transaction in your cryto wallet.
        <br>    2. Switch out your egg.
        <br>    &nbsp;&nbsp;a. click second icon in sidebar at right hand side of the screen.
        <br>    &nbsp;&nbsp;b. Select an egg at right hand side monstre's slider
        <br>    &nbsp;&nbsp;c. Click "Switch to this monstre" button at below the screen.
        <br>    3. Hatch the egg.
        <br>    &nbsp;&nbsp;a. Click on the newly spawned egg incubitor.
        <br>    &nbsp;&nbsp;b. Accept the pop up message.
        <br>    &nbsp;&nbsp;c. Approve transaction in your cryto wallet.
        <br>
        <br><u>Warning: </u>
        <br> Known Issue #1
        <br>&nbsp;All monstre species is display as Bipee, Hebe, Titandoa, Solanack: 
        <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Due to unfinished artwork,
        <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; all monstre species will be displayed as Bipee, Hebe, Titandoa, or Solanack,
        <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and their skills will be displayed as appropriate,
        <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Please use TextUI to view the actual monstre species.
      </p>
    </div>
-->
    <div id="unity-container" class="unity-desktop" style="position: absolute;">
      <canvas id="unity-canvas" ></canvas>

      <div id="unity-loading-bar">
        <div id="unity-logo"></div>
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>
      <div id="unity-warning"> </div>
      <div id="unity-footer">
        <div id="unity-webgl-logo"></div>
        <div id="unity-fullscreen-button"></div>
        <div id="unity-build-title">FantomMonstre</div>
      </div>
    </div>
    <script src="web3/index.js"></script>
    <script>
      var container = document.querySelector("#unity-container");
      var canvas = document.querySelector("#unity-canvas");
      var loadingBar = document.querySelector("#unity-loading-bar");
      var progressBarFull = document.querySelector("#unity-progress-bar-full");
      var fullscreenButton = document.querySelector("#unity-fullscreen-button");
      var warningBanner = document.querySelector("#unity-warning");

      // Shows a temporary message banner/ribbon for a few seconds, or
      // a permanent error message on top of the canvas if type=='error'.
      // If type=='warning', a yellow highlight color is used.
      // Modify or remove this function to customize the visually presented
      // way that non-critical warnings and error messages are presented to the
      // user.
      function unityShowBanner(msg, type) {
        function updateBannerVisibility() {
          warningBanner.style.display = warningBanner.children.length ? 'block' : 'none';
        }
        var div = document.createElement('div');
        div.innerHTML = msg;
        warningBanner.appendChild(div);
        if (type == 'error') div.style = 'background: red; padding: 10px;';
        else {
          if (type == 'warning') div.style = 'background: yellow; padding: 10px;';
          setTimeout(function() {
            warningBanner.removeChild(div);
            updateBannerVisibility();
          }, 5000);
        }
        updateBannerVisibility();
      }

      var buildUrl = "Build";
      var loaderUrl = buildUrl + "/Build11.loader.js";
      var config = {
        dataUrl: buildUrl + "/Build11.data",
        frameworkUrl: buildUrl + "/Build11.framework.js",
        codeUrl: buildUrl + "/Build11.wasm",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "DefaultCompany",
        productName: "FantomMonstre",
        productVersion: "1.0",
        showBanner: unityShowBanner,
      };

      // By default Unity keeps WebGL canvas render target size matched with
      // the DOM size of the canvas element (scaled by window.devicePixelRatio)
      // Set this to false if you want to decouple this synchronization from
      // happening inside the engine, and you would instead like to size up
      // the canvas DOM size and WebGL render target sizes yourself.
      // config.matchWebGLToCanvasSize = false;

      if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
        //container.className = "unity-mobile";
        // Avoid draining fillrate performance on mobile devices,
        // and default/override low DPI mode on mobile browsers.
        //config.devicePixelRatio = 1;
        unityShowBanner('WebGL3 may exhibit inconsistent or unexpected behavior on certain mobile devices');
        
        //canvas.style.width = "1280px";
        //canvas.style.height = "720px";

      } else {
        //canvas.style.width = "1280px";
       //canvas.style.height = "720px";
      }
      loadingBar.style.display = "block";

      var script = document.createElement("script");
      script.src = loaderUrl;
      script.onload = () => {
        createUnityInstance(canvas, config, (progress) => {
          //progressBarFull.style.width = 100 * progress + "%";
        }).then((unityInstance) => {
          window.unityInstance = unityInstance;
          loadingBar.style.display = "none";
          fullscreenButton.onclick = () => {
            unityInstance.SetFullscreen(1);
          };
        }).catch((message) => {
          alert(message);
        });
      };
      document.body.appendChild(script);
    </script>
    <!--
    <script>
      // Get references to the target elements
      const tutorialDiv = document.getElementById('tutorial');
      const unityContainer = document.getElementById('unity-canvas');

      // Calculate the width of the browser viewport
      const viewportWidth = window.innerWidth;

      // Get the width of the unity container
      const unityContainerWidth = unityContainer.offsetWidth;

      // Calculate the width of the target div
      const targetDivWidth = (viewportWidth - unityContainerWidth)/2;

      // Set the width of the target div
      tutorialDiv.style.width = `${targetDivWidth}px`;

      // make sure set back to 1280 no matter what.
      var canvas = document.getElementById("unity-canvas");
      var desiredWidth = 1280;
      var desiredHeight = 768;

      function checkCanvasSize() {
        if (canvas.width != desiredWidth || canvas.height != desiredHeight) {
          canvas.width = desiredWidth;
          canvas.height = desiredHeight;
        }
      }

      var loadingBar = document.getElementById("unity-loading-bar");
      loadingBar.addEventListener("animationstart", function() {
        // Check canvas size every 100ms while loading
        setInterval(checkCanvasSize, 100);
      });
    </script>
    <script>
      window.onload = function() {
        // Get the device pixel ratio
        var dpr = window.devicePixelRatio || 1;
    
        // Set the width and height of the canvas element
        var canvas = document.getElementById("unity-canvas");
        canvas.width = 1280 / dpr;
        canvas.height = 768 / dpr;
      }
    </script>
    <script>
      function adjustCanvasSize(canvas) {
        const devicePixelRatio = window.devicePixelRatio || 1;
        const backingStoreRatio = canvas.webkitBackingStorePixelRatio ||
                                  canvas.mozBackingStorePixelRatio ||
                                  canvas.msBackingStorePixelRatio ||
                                  canvas.oBackingStorePixelRatio ||
                                  canvas.backingStorePixelRatio || 1;
        const ratio = devicePixelRatio / backingStoreRatio;
        const canvasWidth = canvas.clientWidth * ratio;
        const canvasHeight = canvas.clientHeight * ratio;
        canvas.width = canvasWidth;
        canvas.height = canvasHeight;
        canvas.style.width = canvas.clientWidth + "px";
        canvas.style.height = canvas.clientHeight + "px";
      }
      
      // Call adjustCanvasSize on window resize and orientation change
      window.addEventListener("resize", function() {
        adjustCanvasSize(document.getElementById("unity-canvas"));
      });
      window.addEventListener("orientationchange", function() {
        adjustCanvasSize(document.getElementById("unity-canvas"));
      });
      
      // Call adjustCanvasSize initially
      adjustCanvasSize(document.getElementById("unity-canvas"));
    </script>
    -->
  </body>
</html>
